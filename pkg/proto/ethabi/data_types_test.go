package ethabi

import (
	"encoding/hex"
	"strings"
	"testing"

	"github.com/stretchr/testify/require"
)

func TestString_EncodeToABI(t *testing.T) {
	tests := []struct {
		data   String
		hexABI string
	}{
		{
			data:   "test-asset",
			hexABI: "0000000000000000000000000000000000000000000000000000000000000020000000000000000000000000000000000000000000000000000000000000000a746573742d617373657400000000000000000000000000000000000000000000",
		},
		{
			data:   String(strings.Repeat("a", 33)),
			hexABI: "0000000000000000000000000000000000000000000000000000000000000020000000000000000000000000000000000000000000000000000000000000002161616161616161616161616161616161616161616161616161616161616161616100000000000000000000000000000000000000000000000000000000000000",
		},
		{
			data:   "",
			hexABI: "00000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000000",
		},
	}
	for _, tc := range tests {
		actual := tc.data.EncodeToABI()
		actualHexABI := hex.EncodeToString(actual)
		require.Equal(t, tc.hexABI, actualHexABI)
	}

}
